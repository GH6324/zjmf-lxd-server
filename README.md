# 魔方财务-LXD 对接插件 (zjmf-lxd-server)

这是一个为 [魔方财务](https://www.google.com/search?q=https://www.zjmf.com/) (ZJMF) 系统开发的 LXD 对接插件，旨在为主机商提供一套完整、自动化的 LXD 容器销售与管理解决方案。

项目通过一个独立的后端服务与魔方财务插件相结合的模式，实现了高效、安全、功能丰富的 LXD 容器管理体验。

**详细的安装和使用文档，请参考 [项目 Wiki](https://www.google.com/search?q=https://github.com/xkatld/zjmf-lxd-server/wiki)。**

-----

## 核心功能

  * **自动化供应**：通过魔方财务自动创建、终止、暂停和恢复 LXD 容器，支持重装系统和重置密码功能。
  * **资源配置**：在魔方财务产品设置中灵活配置容器资源，包括 CPU 核心数、内存、硬盘大小、网络带宽和流量限制。
  * **客户端功能**：客户可在魔方财务的用户中心查看容器的实时状态、管理 NAT 转发规则。
  * **Web 管理面板**：后端服务自带一个独立的 Web 管理界面，用于集中监控和管理所有创建的 LXD 容器，并提供快捷操作。
  * **安全隔离**：通过独立的 Python API 服务器 和 Token 认证机制，将 LXD 主机与魔方财务面板有效隔离，增强安全性。

-----

## 系统架构

本系统采用前后端分离的架构，确保了灵活性和安全性：

1.  **PHP 插件 (`lxdserver` 目录)**：作为前端的桥梁，内嵌于魔方财务系统中，负责处理来自面板的业务逻辑和用户请求。
2.  **Python API 服务器 (`server` 目录)**：作为核心后端，它是一个基于 Flask 的独立应用。该服务接收来自 PHP 插件的指令，通过 `pylxd` 库与 LXD 守护进程直接通信，执行所有实际的容器管理操作。

这种设计使得 LXD 的管理逻辑与计费系统解耦，即使在计费面板无法访问时，管理员依然可以通过后端的 Web UI 直接管理所有容器。
